package com.trm.cryptosphere.ui.home.page.news.feed

import androidx.compose.runtime.Composable
import androidx.compose.ui.tooling.preview.Preview
import androidx.compose.ui.tooling.preview.PreviewParameter
import androidx.compose.ui.tooling.preview.PreviewParameterProvider
import com.trm.cryptosphere.core.ui.SharedTransitionPreview
import com.trm.cryptosphere.domain.model.NewsFeedItem
import com.trm.cryptosphere.domain.model.NewsItem
import com.trm.cryptosphere.domain.model.TokenItem
import com.trm.cryptosphere.domain.model.TokenQuote
import kotlinx.datetime.TimeZone
import kotlinx.datetime.toLocalDateTime
import kotlin.time.Clock
import kotlin.time.ExperimentalTime

@OptIn(ExperimentalTime::class)
@Preview(showBackground = true, backgroundColor = 0xFF000000, name = "Carousel Test")
@Composable
private fun NewsFeedItemPreview(
  @PreviewParameter(NewsFeedItemPreviewRelatedTokensProvider::class) relatedTokens: List<TokenItem>
) {
  SharedTransitionPreview {
    NewsFeedItemContent(
      item =
        NewsFeedItem(
          news =
            NewsItem(
              id = "1",
              searchKeyWords = listOf("dogecoin", "DOGE"),
              feedDate = Clock.System.now().toLocalDateTime(TimeZone.UTC),
              source = "U.Today",
              title = "Dogecoin Account Drops Casual 'Sup' Tweet: What's Behind It?",
              sourceLink = "https://u.today/",
              imgUrl = "https://u.today/sites/default/files/styles/736x/public/2025-06/s7426.jpg",
              relatedCoins = emptyList(),
              link =
                "https://u.today/dogecoin-account-drops-casual-sup-tweet-whats-behind-it?utm_medium=referral&utm_source=coinstats",
              fetchedDate = Clock.System.now().toLocalDateTime(TimeZone.UTC),
            ),
          relatedTokens = relatedTokens,
        ),
      isCurrent = true,
      onRelatedTokenItemClick = { _, _ -> },
    )
  }
}

private class NewsFeedItemPreviewRelatedTokensProvider : PreviewParameterProvider<List<TokenItem>> {
  override val values: Sequence<List<TokenItem>> =
    sequenceOf(
      emptyList(),
      listOf(
        TokenItem(
          id = 1,
          name = "Bitcoin",
          symbol = "BTC",
          slug = "bitcoin",
          numMarketPairs = 12253,
          dateAdded = "2010-07-13T00:00:00.000Z",
          maxSupply = 21000000.0,
          circulatingSupply = 19891696.0,
          totalSupply = 19891696.0,
          infiniteSupply = false,
          cmcRank = 1,
          selfReportedCirculatingSupply = null,
          selfReportedMarketCap = null,
          tvlRatio = null,
          lastUpdated = "2025-07-13T10:16:02.801Z",
          quote =
            TokenQuote(
              price = 117846.43492418,
              volume24h = 42497165433.17,
              volumeChange24h = -0.19,
              percentChange1h = 0.05,
              percentChange24h = -0.19,
              percentChange7d = 2.5,
              percentChange30d = 10.2,
              percentChange60d = 15.0,
              percentChange90d = 30.5,
              marketCap = 2344000000000.0,
              marketCapDominance = 52.8,
              fullyDilutedMarketCap = 2474775133407.78,
              tvl = null,
              lastUpdated = "2025-07-13T10:16:02.801Z",
            ),
        ),
        TokenItem(
          id = 2,
          name = "Litecoin",
          symbol = "LTC",
          slug = "litecoin",
          numMarketPairs = 1385,
          dateAdded = "2013-04-28T00:00:00.000Z",
          maxSupply = 84000000.0,
          circulatingSupply = 76069014.48347135,
          totalSupply = 84000000.0,
          infiniteSupply = false,
          cmcRank = 20,
          selfReportedCirculatingSupply = null,
          selfReportedMarketCap = null,
          tvlRatio = null,
          lastUpdated = "2025-07-13T10:16:02.801Z",
          quote =
            TokenQuote(
              price = 94.45763733,
              volume24h = 436579423.64,
              volumeChange24h = 1.11,
              percentChange1h = 0.12,
              percentChange24h = 1.11,
              percentChange7d = -2.3,
              percentChange30d = 8.1,
              percentChange60d = 12.5,
              percentChange90d = 25.0,
              marketCap = 7185000000.0,
              marketCapDominance = 0.32,
              fullyDilutedMarketCap = 7934441535.72,
              tvl = null,
              lastUpdated = "2025-07-13T10:16:02.801Z",
            ),
        ),
        TokenItem(
          id = 3,
          name = "Namecoin",
          symbol = "NMC",
          slug = "namecoin",
          numMarketPairs = 7,
          dateAdded = "2013-04-28T00:00:00.000Z",
          maxSupply = 21000000.0,
          circulatingSupply = 14736400.0,
          totalSupply = 14736400.0,
          infiniteSupply = false,
          cmcRank = 800,
          selfReportedCirculatingSupply = null,
          selfReportedMarketCap = null,
          tvlRatio = null,
          lastUpdated = "2025-07-13T10:16:02.801Z",
          quote =
            TokenQuote(
              price = 1.22857614,
              volume24h = 4656.37,
              volumeChange24h = 1.61,
              percentChange1h = 0.03,
              percentChange24h = 1.61,
              percentChange7d = 0.5,
              percentChange30d = 3.0,
              percentChange60d = -2.0,
              percentChange90d = 7.8,
              marketCap = 18100000.0,
              marketCapDominance = 0.0008,
              fullyDilutedMarketCap = 25799098.94,
              tvl = null,
              lastUpdated = "2025-07-13T10:16:02.801Z",
            ),
        ),
        TokenItem(
          id = 4,
          name = "Terracoin",
          symbol = "TRC",
          slug = "terracoin",
          numMarketPairs = 7,
          dateAdded = "2013-04-28T00:00:00.000Z",
          maxSupply = 42000000.0,
          circulatingSupply = 0.0,
          totalSupply = 35039019.14956619,
          infiniteSupply = false,
          cmcRank = 1500,
          selfReportedCirculatingSupply = 35038960.65,
          selfReportedMarketCap = 495548.1410176276,
          tvlRatio = null,
          lastUpdated = "2025-07-13T10:16:02.801Z",
          quote =
            TokenQuote(
              price = 0.01414195,
              volume24h = 0.00,
              volumeChange24h = -0.20,
              percentChange1h = 0.00,
              percentChange24h = -0.20,
              percentChange7d = -1.5,
              percentChange30d = -5.0,
              percentChange60d = 1.2,
              percentChange90d = 0.5,
              marketCap = 0.0,
              marketCapDominance = 0.0,
              fullyDilutedMarketCap = 594000.0,
              tvl = null,
              lastUpdated = "2025-07-13T10:16:02.801Z",
            ),
        ),
        TokenItem(
          id = 5,
          name = "Peercoin",
          symbol = "PPC",
          slug = "peercoin",
          numMarketPairs = 42,
          dateAdded = "2013-04-28T00:00:00.000Z",
          maxSupply = null,
          circulatingSupply = 29663781.66153835,
          totalSupply = 29663781.66153835,
          infiniteSupply = true,
          cmcRank = 600,
          selfReportedCirculatingSupply = null,
          selfReportedMarketCap = null,
          tvlRatio = null,
          lastUpdated = "2025-07-13T10:16:02.801Z",
          quote =
            TokenQuote(
              price = 0.30738101,
              volume24h = 4070.66,
              volumeChange24h = -0.39,
              percentChange1h = -0.05,
              percentChange24h = -0.39,
              percentChange7d = 3.1,
              percentChange30d = 1.0,
              percentChange60d = 4.5,
              percentChange90d = -2.2,
              marketCap = 9120000.0,
              marketCapDominance = 0.0004,
              fullyDilutedMarketCap = 9120000.0,
              tvl = null,
              lastUpdated = "2025-07-13T10:16:02.801Z",
            ),
        ),
        TokenItem(
          id = 6,
          name = "Novacoin",
          symbol = "NVC",
          slug = "novacoin",
          numMarketPairs = 4,
          dateAdded = "2013-04-28T00:00:00.000Z",
          maxSupply = null,
          circulatingSupply = 0.0,
          totalSupply = 4526390.522174,
          infiniteSupply = true,
          cmcRank = 2000,
          selfReportedCirculatingSupply = 5106060.19,
          selfReportedMarketCap = 132392.07855834218,
          tvlRatio = null,
          lastUpdated = "2025-07-13T10:16:02.801Z",
          quote =
            TokenQuote(
              price = 0.02592691,
              volume24h = 2.13,
              volumeChange24h = -0.20,
              percentChange1h = 0.01,
              percentChange24h = -0.20,
              percentChange7d = -5.0,
              percentChange30d = 10.0,
              percentChange60d = 2.0,
              percentChange90d = -8.0,
              marketCap = 0.0,
              marketCapDominance = 0.0,
              fullyDilutedMarketCap = 132392.07,
              tvl = null,
              lastUpdated = "2025-07-13T10:16:02.801Z",
            ),
        ),
        TokenItem(
          id = 7,
          name = "Devcoin",
          symbol = "DVC",
          slug = "devcoin",
          numMarketPairs = 1,
          dateAdded = "2013-04-28T00:00:00.000Z",
          maxSupply = null,
          circulatingSupply = 15167257500.0,
          totalSupply = 15167257500.0,
          infiniteSupply = true,
          cmcRank = 3000,
          selfReportedCirculatingSupply = null,
          selfReportedMarketCap = null,
          tvlRatio = null,
          lastUpdated = "2025-07-13T10:16:02.801Z",
          quote =
            TokenQuote(
              price = 0.00002298,
              volume24h = 10.0,
              volumeChange24h = 0.00,
              percentChange1h = 0.00,
              percentChange24h = 0.00,
              percentChange7d = 0.1,
              percentChange30d = -0.5,
              percentChange60d = 0.2,
              percentChange90d = 1.0,
              marketCap = 348500.0,
              marketCapDominance = 0.0,
              fullyDilutedMarketCap = 348500.0,
              tvl = null,
              lastUpdated = "2025-07-13T10:16:02.801Z",
            ),
        ),
        TokenItem(
          id = 8,
          name = "Feathercoin",
          symbol = "FTC",
          slug = "feathercoin",
          numMarketPairs = 12,
          dateAdded = "2013-05-03T00:00:00.000Z",
          maxSupply = 336000000.0,
          circulatingSupply = 236600238.0,
          totalSupply = 336000000.0,
          infiniteSupply = false,
          cmcRank = 1200,
          selfReportedCirculatingSupply = null,
          selfReportedMarketCap = null,
          tvlRatio = null,
          lastUpdated = "2025-07-13T10:16:02.801Z",
          quote =
            TokenQuote(
              price = 0.00235699,
              volume24h = 16.37,
              volumeChange24h = -0.14,
              percentChange1h = -0.02,
              percentChange24h = -0.14,
              percentChange7d = 1.2,
              percentChange30d = -3.0,
              percentChange60d = 0.8,
              percentChange90d = 2.5,
              marketCap = 557600.0,
              marketCapDominance = 0.0,
              fullyDilutedMarketCap = 792000.0,
              tvl = null,
              lastUpdated = "2025-07-13T10:16:02.801Z",
            ),
        ),
        TokenItem(
          id = 9,
          name = "Mincoin",
          symbol = "MNC",
          slug = "mincoin",
          numMarketPairs = 2,
          dateAdded = "2013-05-03T00:00:00.000Z",
          maxSupply = 10000000.0,
          circulatingSupply = 6228916.8879491,
          totalSupply = 6228916.8879491,
          infiniteSupply = false,
          cmcRank = 2500,
          selfReportedCirculatingSupply = null,
          selfReportedMarketCap = null,
          tvlRatio = null,
          lastUpdated = "2025-07-13T10:16:02.801Z",
          quote =
            TokenQuote(
              price = 0.07458228,
              volume24h = 100.0,
              volumeChange24h = 0.00,
              percentChange1h = 0.00,
              percentChange24h = 0.00,
              percentChange7d = 0.5,
              percentChange30d = 2.0,
              percentChange60d = -1.0,
              percentChange90d = 4.0,
              marketCap = 464500.0,
              marketCapDominance = 0.0,
              fullyDilutedMarketCap = 745822.8,
              tvl = null,
              lastUpdated = "2025-07-13T10:16:02.801Z",
            ),
        ),
        TokenItem(
          id = 10,
          name = "Freicoin",
          symbol = "FRC",
          slug = "freicoin",
          numMarketPairs = 1,
          dateAdded = "2013-05-03T00:00:00.000Z",
          maxSupply = 100000000.0,
          circulatingSupply = 0.0,
          totalSupply = 100000000.0,
          infiniteSupply = false,
          cmcRank = 4000,
          selfReportedCirculatingSupply = null,
          selfReportedMarketCap = null,
          tvlRatio = null,
          lastUpdated = "2025-07-13T10:16:02.801Z",
          quote =
            TokenQuote(
              price = 0.02234799,
              volume24h = 0.00,
              volumeChange24h = 0.00,
              percentChange1h = 0.00,
              percentChange24h = 0.00,
              percentChange7d = 0.0,
              percentChange30d = 0.0,
              percentChange60d = 0.0,
              percentChange90d = 0.0,
              marketCap = 0.0,
              marketCapDominance = 0.0,
              fullyDilutedMarketCap = 2234799.0,
              tvl = null,
              lastUpdated = "2025-07-13T10:16:02.801Z",
            ),
        ),
      ),
    )
}
